# 🧪 دليل الرسائل التجريبية - WhatsApp

## 📋 نظرة عامة

تم إضافة قسم **الرسائل التجريبية** إلى نظام WhatsApp للموارد البشرية لتسهيل اختبار إرسال الرسائل والقوالب دون الحاجة لإدخال أرقام هواتف متعددة.

## 👤 جهة الاتصال التجريبية

- **الاسم**: كريم البحراوي
- **رقم الهاتف**: 01016772118
- **الرقم المنسق**: 2001016772118 (تنسيق مصري)

## 🚀 كيفية الوصول

1. اذهب إلى **لوحة تحكم WhatsApp**: `http://localhost:3000/whatsapp`
2. اضغط على تبويب **🧪 رسائل تجريبية**

## ⚡ الرسائل السريعة

يحتوي التبويب على 4 أزرار للرسائل السريعة:

### 1. ✋ رسالة ترحيب
```
السلام عليكم ورحمة الله وبركاته، هذه رسالة تجريبية من نظام الموارد البشرية 👋
```

### 2. ✅ اختبار النظام
```
تم اختبار النظام بنجاح! ✅ جميع الخدمات تعمل بشكل طبيعي.
```

### 3. 🕐 رسالة بالتوقيت
```
تم الإرسال في [التوقيت الحالي] 📅⏰
```

### 4. 😊 رسالة بالإيموجي
```
هذه رسالة تجريبية تحتوي على رموز تعبيرية 😊📱💻🎉🔥⭐
```

## 📝 القوالب التجريبية

### تحميل القوالب التجريبية
1. اضغط على زر **📥 تحميل القوالب التجريبية**
2. سيتم تحميل 5 قوالب جاهزة للاختبار

### القوالب المتاحة:

#### 1. ترحيب_كريم
```
السلام عليكم {{name}} 👋

مرحباً بك في نظام الموارد البشرية الجديد!

هذه رسالة اختبار مخصصة لك.

التوقيت: {{timestamp}}
القسم: {{department}}

نتمنى لك يوماً موفقاً! 🌟
```
**المتغيرات**: name, timestamp, department

#### 2. اختبار_النظام
```
🧪 اختبار النظام

عزيزي {{name}},

تم اختبار النظام بنجاح!

✅ الحالة: {{status}}
📅 التاريخ: {{date}}
⏰ الوقت: {{time}}
🔢 رقم الاختبار: {{test_number}}

جميع الأنظمة تعمل بكفاءة عالية 🚀
```
**المتغيرات**: name, status, date, time, test_number

#### 3. تذكير_اجتماع_تجريبي
```
📅 تذكير اجتماع

عزيزي {{name}},

لديك اجتماع مهم:

📋 الموضوع: {{subject}}
📅 التاريخ: {{date}}
⏰ الوقت: {{time}}
📍 المكان: {{location}}

يرجى الحضور في الموعد المحدد.

شكراً لك! 🙏
```
**المتغيرات**: name, subject, date, time, location

#### 4. تهنئة_عيد_ميلاد_تجريبية
```
🎉 عيد ميلاد سعيد!

عزيزي {{name}},

أسرة {{company}} تتقدم لك بأحر التهاني بمناسبة عيد ميلادك 🎂

نتمنى لك عاماً مليئاً بالصحة والسعادة والنجاح.

كل عام وأنت بخير! 🌟🎈

مع أطيب التحيات,
فريق الموارد البشرية 💐
```
**المتغيرات**: name, company

#### 5. إشعار_راتب_تجريبي
```
💰 إشعار راتب

عزيزي {{name}},

تم إيداع راتب شهر {{month}} في حسابك المصرفي.

📊 تفاصيل الراتب:
💵 المبلغ الإجمالي: {{total_amount}}
💳 المبلغ الصافي: {{net_amount}}
📅 تاريخ الإيداع: {{deposit_date}}
🏦 البنك: {{bank_name}}

شكراً لجهودك المتميزة! 👏
```
**المتغيرات**: name, month, total_amount, net_amount, deposit_date, bank_name

## 💬 الرسائل المخصصة

1. **بدون قالب**: اكتب رسالة نصية مباشرة
2. **باستخدام قالب**: اختر قالب من القائمة المنسدلة

## 📊 سجل الرسائل

يعرض السجل آخر 10 رسائل تم إرسالها مع:
- ⚡ نوع الرسالة (سريعة/قالب/نصية)
- 📅 التوقيت
- ✅ حالة الإرسال
- 📝 محتوى الرسالة
- 👤 جهة الاتصال

## 🔧 اختبار من سطر الأوامر

### اسكريبت الاختبار السريع
```bash
./test-whatsapp.sh
```

### إرسال رسالة مباشرة
```bash
curl -X POST http://localhost:5001/api/whatsapp/send \
  -H "Content-Type: application/json" \
  -d '{
    "to": "2001016772118",
    "message": "رسالة اختبار من النظام"
  }'
```

### إرسال قالب
```bash
curl -X POST http://localhost:5001/api/whatsapp/send-template \
  -H "Content-Type: application/json" \
  -d '{
    "to": "2001016772118",
    "templateName": "ترحيب_كريم",
    "templateData": {
      "name": "كريم البحراوي",
      "timestamp": "2025-06-06 09:30",
      "department": "تطوير البرمجيات"
    }
  }'
```

## 📋 تعليمات الاستخدام

1. **تأكد من الاتصال**: WhatsApp يجب أن يكون متصل
2. **ابدأ بالرسائل السريعة**: للاختبار المبدئي
3. **جرب القوالب**: بعد تحميل القوالب التجريبية
4. **راقب السجل**: لمتابعة حالة الإرسال
5. **استخدم الرسائل المخصصة**: لاختبار محتوى جديد

## 🎯 أهداف الاختبار

- ✅ التأكد من عمل إرسال الرسائل
- ✅ اختبار القوالب والمتغيرات
- ✅ فحص التنسيق والإيموجي
- ✅ قياس سرعة الإرسال
- ✅ التحقق من استقرار النظام

## 🚨 نصائح مهمة

- 🔒 **الأمان**: الرسائل التجريبية تُرسل فقط إلى كريم البحراوي
- ⏱️ **التوقيت**: احترم أوقات العمل عند الاختبار
- 📱 **التحديث**: أعد تحميل الصفحة إذا لم تظهر القوالب
- 🔄 **الاستمرارية**: تأكد من استقرار الاتصال قبل الاختبار

## 🛠️ استكشاف الأخطاء

### المشاكل الشائعة:

#### 1. WhatsApp غير متصل
**الحل**: اذهب إلى `/whatsapp/connect` وامسح QR Code

#### 2. القوالب لا تظهر
**الحل**: اضغط على "تحميل القوالب التجريبية"

#### 3. فشل الإرسال
**الحل**: تحقق من:
- حالة الاتصال
- تنسيق رقم الهاتف
- نص الرسالة

#### 4. بطء الإرسال
**الحل**: تحقق من اتصال الإنترنت والخادم

---

## 📞 الدعم

في حالة وجود مشاكل:
1. تحقق من logs الخادم
2. راجع سجل الرسائل في التطبيق
3. استخدم أدوات Developer Tools في المتصفح

**ملف الاختبار**: `test-whatsapp.sh`
**سجل الأخطاء**: `backend/logs/whatsapp.log`
**القوالب التجريبية**: `backend/data/whatsapp/test-templates.json` 